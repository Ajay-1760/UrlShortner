package com.urlshortner.demo.service;

import java.time.LocalDateTime;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.urlshortner.demo.dao.UrlDao;
import com.urlshortner.demo.entities.URL;

@Service
public class UrlService {
	
	@Autowired
	private UrlDao url1;
	private static long idCounter = 1;
	
	public void generateShortUrl(String originalUrl) {
		
		URL url=new URL();
		
		url.setOriginalUrl(originalUrl);
		url.setCreatedAt(LocalDateTime.now());
		
		String shortenedUrl= generateShortenedUrl(originalUrl)
		
	}
	
    private String generateShortenedUrl(String originalUrl) {
    	long id = idCounter++;
        return idToShortURL(id);
    }
    
    String idToShortURL(long n)
    {
        // Map to store 62 possible characters
        char map[] = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toCharArray();
      
        StringBuilder shorturl;
      
        // Convert given integer id to a base 62 number
        while (n)
        {
            shorturl.append(map[n%62]);
            n = n/62;
        }
      
        return shorturl.reverse().toString();
    }
}
